<!DOCTYPE html>
<html lang="kr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <script src="javascript/basic.js"></script>
    <script src="javascript/variable.js"></script>
    <script src="javascript/operator.js"></script> -->
    <style>
        /* div {
            float: left;
            width: 50px;
            height: 50px;
            background-color: yellow;
        }

        p {
            clear: left;
        } */
    </style>
</head>

<body id="bdy">
    <div id="show"></div>
    <ul id="list"></ul>
    <ul id="members"></ul>
    <table id="tbl" border="1"></table>
    <p />
    <button id="btn" style="display: block;" onclick="changeColor()">색변경하기</button>
    <!-- <script src="javascript/object.js"></script> -->
    <!-- <script src="javascript/object2.js"></script>
    <script src="javascript/class.js"></script>
    <script src="javascript/array.js"></script> -->
    <!-- <script src="javascript/function.js"></script> -->
    <script>

        let json = '[{"id":1,"first_name":"Pierrette","last_name":"McWhin","email":"pmcwhin0@theglobeandmail.com","gender":"Male","ip_address":"158.237.141.213"},{"id":2,"first_name":"Micah","last_name":"Krysztowczyk","email":"mkrysztowczyk1@meetup.com","gender":"Genderfluid","ip_address":"23.135.9.30"},{"id":3,"first_name":"Bernadina","last_name":"Knok","email":"bknok2@live.com","gender":"Bigender","ip_address":"127.94.34.111"},{"id":4,"first_name":"Lark","last_name":"Mcimmie","email":"lmcimmie3@apple.com","gender":"Non-binary","ip_address":"26.4.59.189"},{"id":5,"first_name":"Gabbie","last_name":"Von Salzberg","email":"gvonsalzberg4@whitehouse.gov","gender":"Genderqueer","ip_address":"31.136.56.227"}]';

        // let json = [
        //     { id: 1, first_name: "Pierrette", last_name: "McWhin", email: "pmcwhin0@theglobeandmail.com", gender: "Male", ip_address: "158.237.141.213" },
        //     { id: 2, first_name: "Micah", last_name: "Krysztowczyk", email: "mkrysztowczyk1@meetup.com", gender: "Genderfluid", ip_address: "23.135.9.30" },
        //     { id: 3, first_name: "Bernadina", last_name: "Knok", email: "bknok2@live.com", gender: "Bigender", ip_address: "127.94.34.111" },
        //     { id: 4, first_name: "Lark", last_name: "Mcimmie", email: "lmcimmie3@apple.com", gender: "Non-binary", ip_address: "26.4.59.189" },
        //     { id: 5, first_name: "Gabbie", last_name: "Von Salzberg", email: "gvonsalzberg4@whitehouse.gov", gender: "Genderqueer", ip_address: "31.136.56.227" }];

        let data = JSON.parse(json);
        function createTr(obj) {

            let trTag = document.createElement('tr');
            trTag.onmouseover = function () {
                this.style.backgroundColor = 'yellow';
            }
            trTag.onmouseout = function () {
                this.style.backgroundColor = '';
            }
            let td = document.createElement('td');
            let chk = document.createElement('input');
            chk.setAttribute('type', 'checkbox');
            td.appendChild(chk);
            trTag.appendChild(td);

            for (field in obj) {
                if(field == "ip_address") {
                    break;
                }
                let tdTag = document.createElement('td');
                let text = document.createTextNode(obj[field]);
                tdTag.appendChild(text);
                trTag.appendChild(tdTag);
            }
            td = document.createElement('td');
            let btn = document.createElement('button');
            btn.innerHTML = 'OK';
            btn.onclick = clickFnc;
            td.appendChild(btn);
            trTag.appendChild(td);
            return trTag;
        }
        let tbl = document.getElementById('tbl');

        let tr = document.createElement('tr');
        tbl.appendChild(tr);
        for (field in data[0]) {
            if(field == "ip_address") {
                break;
            }
            let tdTag = document.createElement('td');
            let text = document.createTextNode(field);
            tdTag.appendChild(text);
            tr.appendChild(tdTag);
        }

        data.forEach(function (val, idx, ary) {
            let newTr = createTr(val);
            tbl.appendChild(newTr);
        });

        function clickFnc() {
            this.parentNode.parentNode.remove();
        }

    </script>
</body>

</html>